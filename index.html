<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>الهلال الأحمر - قطاعات الحرم</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #f8fafc;
        }
        .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .card-hover:active {
            transform: scale(0.98);
        }
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col bg-gray-50">

    <!-- Header / Navbar -->
    <header class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex items-center justify-between">
            <div class="flex items-center gap-3 cursor-pointer" onclick="showMainGrid()">
                <!-- New Red Crescent Image Logo -->
                <div class="w-12 h-12 flex-shrink-0">
                   <img src="Flag_of_the_Red_Crescent.jpg" alt="شعار الهلال الأحمر" class="w-full h-full object-contain">
                </div>
                <div>
                    <h1 class="text-lg font-bold text-gray-800 leading-tight">الهلال الأحمر السعودي</h1>
                    <p class="text-[10px] text-gray-500">نطاق الحرم المكي الشريف</p>
                </div>
            </div>
            
            <!-- Back Button -->
            <button id="backBtn" onclick="showMainGrid()" class="hidden text-sm bg-gray-100 text-gray-600 px-3 py-1 rounded-lg hover:bg-gray-200 transition flex items-center gap-1">
                <span>الرئيسية</span>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z" clip-rule="evenodd" />
                </svg>
            </button>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="flex-grow container mx-auto px-4 py-6 flex flex-col items-center pb-20">
        
        <!-- TITLE SECTION -->
        <div id="pageHeader" class="text-center mb-8 w-full max-w-2xl">
            <!-- تمت إضافة onclick و cursor-pointer للصورة -->
            <img src="WhatsApp Image 2026-01-14 at 1.03.11 AM.jpeg" onclick="openImageModal(this.src)" class="mx-auto mb-6 w-full rounded-xl shadow-sm cursor-pointer hover:opacity-95 transition" alt="صورة توضيحية">
            <h2 id="mainTitle" class="text-2xl font-bold text-gray-800 mb-2">توزيع القطاعات التشغيلية</h2>
            <p id="subTitle" class="text-gray-600 text-sm">اختر القطاع لعرض نقاط التمركز</p>
        </div>

        <!-- SECTORS GRID (Main View) -->
        <div id="sectorsGrid" class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full max-w-3xl fade-in">
            <!-- 1. Mataf (تم توحيد اللون إلى الأحمر) -->
            <div onclick="openSector('mataf')" class="card-hover bg-white rounded-xl shadow-sm border border-gray-100 p-6 flex flex-col items-center text-center cursor-pointer relative overflow-hidden group">
                <div class="absolute top-0 left-0 w-full h-1 bg-red-600"></div>
                <div class="bg-red-50 p-3 rounded-full mb-3 text-red-600 group-hover:bg-red-100 transition">
                    <!-- أيقونة الكعبة المشرفة الجديدة -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <!-- قاعدة الكعبة -->
                        <rect x="5" y="6" width="14" height="14" rx="1" stroke-width="2" fill="currentColor" fill-opacity="0.1"/>
                        <!-- الحزام الذهبي -->
                        <path d="M5 10H19" stroke-width="2" stroke="currentColor"/>
                        <!-- باب الكعبة -->
                        <rect x="14" y="13" width="3" height="7" stroke-width="1.5" fill="none"/>
                    </svg>
                </div>
                <h3 class="font-bold text-gray-800 text-lg">قطاع المطاف و الرواق السعودي</h3>
            </div>

            <!-- 2. Masaa -->
            <div onclick="openSector('masaa')" class="card-hover bg-white rounded-xl shadow-sm border border-gray-100 p-6 flex flex-col items-center text-center cursor-pointer relative overflow-hidden group">
                <div class="absolute top-0 left-0 w-full h-1 bg-red-600"></div>
                <div class="bg-red-50 p-3 rounded-full mb-3 text-red-600 group-hover:bg-red-100 transition">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5l7 7-7 7M5 5l7 7-7 7" />
                    </svg>
                </div>
                <h3 class="font-bold text-gray-800 text-lg">قطاع المسعى و الساحات الشرقية</h3>
            </div>

            <!-- 3. West & South -->
            <div onclick="openSector('westSouth')" class="card-hover bg-white rounded-xl shadow-sm border border-gray-100 p-6 flex flex-col items-center text-center cursor-pointer relative overflow-hidden group">
                <div class="absolute top-0 left-0 w-full h-1 bg-red-600"></div>
                <div class="bg-red-50 p-3 rounded-full mb-3 text-red-600 group-hover:bg-red-100 transition">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                         <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4" />
                    </svg>
                </div>
                <h3 class="font-bold text-gray-800 text-lg">قطاع الساحات الغربية و الجنوبية</h3>
            </div>

            <!-- 4. Expansion -->
            <div onclick="openSector('expansion')" class="card-hover bg-white rounded-xl shadow-sm border border-gray-100 p-6 flex flex-col items-center text-center cursor-pointer relative overflow-hidden group">
                <div class="absolute top-0 left-0 w-full h-1 bg-red-600"></div>
                <div class="bg-red-50 p-3 rounded-full mb-3 text-red-600 group-hover:bg-red-100 transition">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5" />
                    </svg>
                </div>
                <h3 class="font-bold text-gray-800 text-lg">قطاع التوسعة السعودية الثالثة</h3>
            </div>
        </div>

        <!-- LOCATIONS LIST VIEW (Initially Hidden) -->
        <div id="locationsView" class="hidden w-full max-w-3xl fade-in">
            <div id="locationsList" class="grid grid-cols-1 gap-3">
                <!-- Javascript will populate this -->
            </div>
        </div>

    </main>

    <!-- Image Modal (Hidden by default) -->
    <div id="imageModal" class="fixed inset-0 z-[100] bg-black/90 hidden flex items-center justify-center p-4 backdrop-blur-sm transition-opacity duration-300" onclick="closeImageModal()">
        <div class="relative max-w-5xl w-full max-h-screen flex items-center justify-center">
            <button onclick="closeImageModal()" class="absolute -top-12 right-0 text-white hover:text-red-500 transition p-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <img id="modalImage" src="" alt="عرض كامل" class="max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl">
        </div>
    </div>

    <!-- No Footer Here -->

    <script>
    // Image Modal Functions
    function openImageModal(src) {
        const modal = document.getElementById('imageModal');
        const modalImg = document.getElementById('modalImage');
        if(modal && modalImg) {
            modalImg.src = src;
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden'; // منع التمرير في الخلفية
        }
    }

    function closeImageModal() {
        const modal = document.getElementById('imageModal');
        if(modal) {
            modal.classList.add('hidden');
            document.body.style.overflow = 'auto'; // إعادة تفعيل التمرير
        }
    }

    // 1. Data for Mataf Sector (Updated with Coordinates where available)
    const matafLocations = [
        { 
            name: "نهاية مشاية باب الملك عبد الله", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42314,39.82570",
            desc: "اسفل لافتة الملك عبدالله صحن المطاف",
            health: "المركز الصحي 3"
        },
        { 
            name: "نهاية مشاية باب العمرة", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42277,39.82494",
            desc: "اسفل سلم العمرة صحن المطاف",
            health: "المركز الصحي 3"
        },
        { 
            name: "نهاية مشاية باب الملك فهد", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42198,39.82581", 
            desc: "أسفل سلم 15 مصليات الملك فهد صحن المطاف",
            health: "المركز الصحي 3"
        },
        { 
            name: "المحطة الاسعافية", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42197,39.82465",
            desc: "بدروم الملك فهد باب 83",
            health: "المركز الصحي 1 - المركز الصحي 3"
        },
        { 
            name: "سلالم باب الملك فهد", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42198,39.82524",
            desc: "سلالم 14 و 15 الدور الأرضي",
            health: "المركز الصحي 1 - المركز الصحي 3"
        },
        { 
            name: "مشاية باب الملك فهد", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42155,39.82470",
            desc: "باب 79 من الداخل اتجاه المطاف الأرضي",
            health: "المركز الصحي 1 - مستشفى جوار"
        },
        { 
            name: "سلالم باب الملك عبدالله", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42314,39.82572", // Updated based on request
            desc: "اسفل سلالم الملك عبد الله صحن المطاف",
            health: "مستشفى جوار - المركز الصحي 3"
        },
        { 
            name: "الدور الأرضي باب العمرة من الداخل", 
            url: "https://www.google.com/maps/search/?api=1&query=21.422778,39.824944",
            desc: "مدخل باب العمرة من اليمين",
            health: "مستشفى جوار"
        },
        { 
            name: "الدور الأرضي باب ٧٤", 
            url: "https://maps.app.goo.gl/x8nKUSUWgYbCa1D66", // No coordinates in PDF, keeping original
            desc: "باب 74 من الداخل في المصليات النسائية",
            health: "المركز الصحي 1 - مستشفى جوار"
        },
        { 
            name: "مصليات الملك فهد الدور الارضي", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42151,39.82570",
            desc: "باب 94 من الداخل",
            health: "المركز الصحي 1"
        },
        { 
            name: "باب ١٤٥ من الداخل الدور الأرضي", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42361,39.82583",
            desc: "باب الفتح من الداخل",
            health: "المركز الصحي 3"
        },
        { 
            name: "مركز السلام", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42231,39.82670",
            desc: "خلف مصلى المهمات",
            health: "المركز الصحي 3"
        },
        { 
            name: "مشاية السلام", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42297,39.82663",
            desc: "مشاية السلام صحن المطاف",
            health: "المركز الصحي 3"
        },
        { 
            name: "نهاية مشاية باب الملك عبد العزيز", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42188,39.82632",
            desc: "اسفل سلم الملك عبد العزيز صحن المطاف",
            health: "المركز الصحي 3"
        },
        { 
            name: "المسعى البدروم باب السلام", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42277,39.82703",
            desc: "مدخل باب السلام",
            health: "المركز الصحي 3"
        },
        { 
            name: "باب الفتح", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42344,39.82680",
            desc: "مدخل باب الفتح",
            health: "المركز الصحي 3 - مستشفى الجوار"
        },
        { 
            name: "الطواف الدور الأرضي خط النية", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42178,39.82694",
            desc: "المطاف اللمبة الخضراء",
            health: "المركز الصحي 3"
        },
        { 
            name: "مدخل المسعى مصلى الركعتين", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42318,39.82704",
            desc: "صحن المطاف خط النية",
            health: "المركز الصحي 3"
        },
        { 
            name: "مشاية ام هاني", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42271,39.82720",
            desc: "مخرج الصفا الدور الأرضى بإتجاه اليسار",
            health: "المركز الصحي 3"
        },
        { 
            name: "مركز السطح", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42108,39.82517",
            desc: "يمين باب 79 السطح",
            health: "المركز الصحي 1"
        },
        { 
            name: "المطاف سطح الحرم جسر التوسعة 3", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42335,39.82547",
            desc: "سلالم 145 السطح",
            health: "المركز الصحي 1"
        },
        { 
            name: "سطح الحرم خط النية", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42168,39.82672",
            desc: "سلالم اجياد السطح",
            health: "المركز الصحي 3"
        },
        { 
            name: "سطح المطاف مزلقان العربات", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42322,39.82689",
            desc: "مدخل جسر اجياد سلم 3 السطح",
            health: "المركز الصحي 4"
        },
        { 
            name: "باب العمرة الدور الأول", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42314,39.82511",
            desc: "سلالم 66 الدور الأول باتجاه اليسار",
            health: "المركز الصحي 1 - مستشفى الجوار"
        },
        { 
            name: "مركز الدور الأول", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42141,39.82437",
            desc: "بجوار باب 79 الدور الأول",
            health: "المركز الصحي 1"
        },
        { 
            name: "جسر اجياد الدور الاول", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42144,39.82643",
            desc: "جسر اجياد من الداخل",
            health: "المركز الصحي 4 - مستشفى اجياد"
        },
        { 
            name: "الميزانين الدور الاول", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42241,39.82707",
            desc: "سلالم ومصاعد الأرقم - باب 22 السطح",
            health: "المركز الصحي 4"
        },
        { 
            name: "باب الفتح الدور الأول", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42368,39.82644",
            desc: "باب 45",
            health: "المركز الصحي 1"
        },
        { 
            name: "سلالم باب ٦٦ الدور الأول", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42236,39.82507",
            desc: "مصليات باب 66 الدور الأول من الداخل",
            health: "المركز الصحي 1"
        }
    ];

    // 2. Data for Masaa Sector (Updated with Coordinates where available)
    const masaaLocations = [
        { 
            name: "المسعى الارضي باب ٢٢", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42345,39.82746",
            desc: "باب 22 من الداخل",
            health: "المركز الصحي 3"
        },
        { 
            name: "المسعى الأرضي باب بني شيبة", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42407,39.82724",
            desc: "وسط المسعى من الداخل",
            health: "المركز الصحي 3"
        },
        { 
            name: "سلالم المروة", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42476,39.82737",
            desc: "سلالم المروة الدور الأرضي من الداخل",
            health: "المركز الصحي 3"
        },
        { 
            name: "المروة الدور الأرضي", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42547,39.82725",
            desc: "باب 25 من الداخل",
            health: "المركز الصحي 3"
        },
        { 
            name: "المسعى الارضي باب علي", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42288,39.82756",
            desc: "باب 17",
            health: "المركز الصحي 3"
        },
        { 
            name: "الصفا الدور الارضي", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42191,39.82760",
            desc: "باب 13",
            health: "المركز الصحي 3"
        },
        { 
            name: "باب الصفا من الخارج الدور الأول", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42240,39.82782",
            desc: "سلالم الأرقم من الخارج جسر اجياد",
            health: "المركز الصحي 4"
        },
        { 
            name: "الصفا الأول", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42184,39.82724",
            desc: "باب 11 - داخل سلم اجياد باتجاه اليمين",
            health: "المركز الصحي 4 - مستشفى اجياد"
        },
        { 
            name: "سلم أجياد الساحات الشرقية", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42381,39.82903",
            desc: "سلم أجياد الساحات الشرقية",
            health: "المركز الصحي 4 - مستشفى اجياد"
        },
        { 
            name: "مركز اسعاف القشاشية", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42474,39.82904",
            desc: "اعلى دورة مياه 9",
            health: "المركز الصحي 3 - مستشفى اجياد"
        },
        { 
            name: "برحة باب علي", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42366,39.83095",
            desc: "مواقف الباصات برحة باب علي",
            health: "المركز الصحي 3"
        },
        { 
            name: "مواقف الجنائز بمولد النبي", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42602,39.82899",
            desc: "بجوار ادارة هيئة الأمر بالمعروف والنهي عن المنكر",
            health: "المركز الصحي 3"
        },
        { 
            name: "باب علي من الخارج", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42308,39.82792",
            desc: "مقابل باب 17 في الساحات",
            health: "المركز الصحي 3"
        },
        { 
            name: "اسفل الدائري الأول", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42732,39.82878",
            desc: "اسفل كبرى الغزة",
            health: "المركز الصحي 3"
        },
        { 
            name: "جسر بني شيبة من الخارج", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42439,39.82775",
            desc: "مقابل باب 23",
            health: "المركز الصحي 3"
        }
    ];

    // 3. Data for West & South Sector (Updated with Coordinates where available)
    const westSouthLocations = [
        { 
            name: "الساحات الجنوبية أمام رولكس", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42031,39.82350",
            desc: "الساحات الجنوبية امام رولكس",
            health: "مستشفى الجوار"
        },
        { 
            name: "شارع إبراهيم الخليل أسفل الدائري الأول", 
            url: "https://www.google.com/maps/search/?api=1&query=21.41886,39.82267",
            desc: "اسفل الدائري الأول مقابل فندق جميرا",
            health: "مستشفى الجوار"
        },
        { 
            name: "المسيال أسفل الدائري الأول", 
            url: "https://www.google.com/maps/search/?api=1&query=21.41864,39.82372",
            desc: "مابين شركة مكة للإنشاء والتعمير وبرج الساعة",
            health: "مستشفى الجوار"
        },
        { 
            name: "المسيال بالساحات", 
            url: "https://www.google.com/maps/search/?api=1&query=21.41981,39.82470",
            desc: "بجوار دورة مياه 4",
            health: "مستشفى الجوار"
        },
        { 
            name: "وقف الملك عبد العزيز", 
            url: "https://www.google.com/maps/search/?api=1&query=21.41998,39.82573",
            desc: "داخل السوق الدور الأرضي",
            health: "مستشفى أجياد"
        },
        { 
            name: "وقف الملك عبد العزيز مدخل الأبراج من نفق السوق الصغير", 
            url: "https://www.google.com/maps/search/?api=1&query=21.41898,39.82636",
            desc: "مدخل الفنادق من نفق السوق الصغير",
            health: "مستشفى أجياد"
        },
        { 
            name: "اسفل جسر أجياد بالساحات الجنوبية", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42038,39.82646",
            desc: "يمين باب الملك عبد العزيز المغلق",
            health: "مستشفى أجياد - المركز الصحي 3"
        },
        { 
            name: "باب أجياد", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42093,39.82633",
            desc: "بجوار جسر اجياد من الاسفل",
            health: "مستشفى أجياد - المركز الصحي 3"
        },
        { 
            name: "باب الملك عبد العزيز", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42094,39.82578",
            desc: "باب 1 مقابل مدخل برج الساعة",
            health: "مستشفى أجياد - المركز الصحي 3"
        },
        { 
            name: "شارع أجياد (وقف الملك عبد العزيز)", 
            url: "https://www.google.com/maps/search/?api=1&query=21.41937,39.82717",
            desc: "مقابل دورات مياه 1 - مدخل الفنادق من نفق السوق الصغير",
            health: "مستشفى أجياد"
        },
        { 
            name: "شركة مكة للإنشاء والتعمير", 
            url: "https://www.google.com/maps/search/?api=1&query=21.41909,39.82306",
            desc: "داخل أسواق شركة مكة للإنشاء والتعمير",
            health: "مستشفى الجوار"
        },
        { 
            name: "مركز اسعاف الشبيكة", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42171,39.82228",
            desc: "المركز الاسعافي",
            health: "مستشفى الجوار"
        },
        { 
            name: "باب العمرة من الخارج", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42286,39.82454",
            desc: "باب العمرة من الخارج",
            health: "مستشفى الجوار"
        },
        { 
            name: "باب ٦٦", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42239,39.82412",
            desc: "باب 66 من الخارج",
            health: "مستشفى الجوار"
        },
        { 
            name: "باب الملك فهد من الخارج", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42121,39.82398",
            desc: "باب 79 من الخارج",
            health: "مستشفى الجوار - المركز الصحي 1"
        },
        { 
            name: "أمام دار التوحيد", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42065,39.82318",
            desc: "الساحات الغربية مقابل دار التوحيد",
            health: "مستشفى الجوار"
        },
        { 
            name: "شارع إبراهيم الخليل ميدان الشبيكة", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42107,39.82222",
            desc: "أمام الدفاع المدني شارع ابراهيم الخليل",
            health: "مستشفى الجوار"
        },
        { 
            name: "مصليات باب الملك فهد", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42190,39.82332",
            desc: "بجوار دورة مياه 8",
            health: "مستشفى الجوار"
        }
    ];

    // 4. Data for Expansion Sector (Updated with Coordinates where available)
    const expansionLocations = [
        { 
            name: "باب 114", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42359,39.82292",
            desc: "باب 114 من الداخل",
            health: "مستشفى الجوار"
        },
        { 
            name: "باب 125 ب", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42320,39.82401",
            desc: "باب 125 من الداخل",
            health: "مستشفى الجوار"
        },
        { 
            name: "باب 106 ب", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42432,39.82333",
            desc: "باب 106 من الداخل",
            health: "مستشفى الحرم"
        },
        { 
            name: "مصليات شوتر 1", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42453,39.82411",
            desc: "الدور الأول شوتر 1",
            health: "مستشفى الحرم"
        },
        { 
            name: "مصليات شوتر 2", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42383,39.82469",
            desc: "الدور الأول شوتر 2",
            health: "مستشفى الحرم"
        },
        { 
            name: "مصليات المساطب الشمالية الغربية", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42628,39.82247",
            desc: "المدرجات بجوار مستشفى الحرم",
            health: "مستشفى الحرم"
        },
        { 
            name: "مصليات باب 114 الساحات الشمالية", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42463,39.82248",
            desc: "باب 114 الساحات الشمالية - مصليات",
            health: "مستشفى الحرم"
        },
        { 
            name: "باب 100", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42538,39.82428",
            desc: "باب 100 من الداخل",
            health: "مستشفى الحرم"
        },
        { 
            name: "مركز حرم 4 باب 175", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42581,39.82569",
            desc: "المركز الاسعافي بالتوسعة السعودية الثالثة",
            health: "مستشفى الحرم"
        },
        { 
            name: "مصليات شوتر 3", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42521,39.82539",
            desc: "الدور الأول شوتر 3",
            health: "مستشفى الحرم"
        },
        { 
            name: "باب 165 ب", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42639,39.82693",
            desc: "باب 165 من الداخل",
            health: "مستشفى الحرم"
        },
        { 
            name: "الأنفاق المؤدية الى جرول", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42632,39.82353",
            desc: "بجوار مستشفى الحرم",
            health: "مستشفى الحرم"
        },
        { 
            name: "مصليات المساطب الشمالية الشرقية", 
            url: "https://www.google.com/maps/search/?api=1&query=21.42716,39.82406",
            desc: "المدرجات الشرقية يسار مستشفى الحرم",
            health: "مستشفى الحرم"
        }
    ];

    const elements = {
        grid: document.getElementById('sectorsGrid'),
        list: document.getElementById('locationsView'),
        listContainer: document.getElementById('locationsList'),
        backBtn: document.getElementById('backBtn'),
        title: document.getElementById('mainTitle'),
        subTitle: document.getElementById('subTitle')
    };

    function showMainGrid() {
        if (!elements.grid || !elements.list) return;
        elements.grid.classList.remove('hidden');
        elements.list.classList.add('hidden');
        elements.backBtn.classList.add('hidden');
        elements.title.innerText = "توزيع القطاعات التشغيلية";
        elements.subTitle.innerText = "اختر القطاع لعرض نقاط التمركز";
        elements.listContainer.innerHTML = ''; 
    }

    function openSector(sectorId) {
        if (sectorId === 'mataf') {
            renderLocationsList("قطاع المطاف و الرواق السعودي", matafLocations);
        } else if (sectorId === 'masaa') {
            renderLocationsList("قطاع المسعى و الساحات الشرقية", masaaLocations);
        } else if (sectorId === 'westSouth') {
            renderLocationsList("قطاع الساحات الغربية و الجنوبية", westSouthLocations);
        } else if (sectorId === 'expansion') {
            renderLocationsList("قطاع التوسعة السعودية الثالثة", expansionLocations);
        } else {
            alert("لا توجد بيانات لهذا القطاع حالياً.");
        }
    }

    function renderLocationsList(sectorTitle, locations) {
        if (!elements.grid || !elements.list) return;
        
        elements.grid.classList.add('hidden');
        elements.list.classList.remove('hidden');
        elements.backBtn.classList.remove('hidden');
        
        elements.title.innerText = sectorTitle;
        elements.subTitle.innerText = "اضغط على الموقع لفتح الخريطة";

        const html = locations.map(loc => `
            <a href="${loc.url}" target="_blank" rel="noopener noreferrer" class="block w-full bg-white border border-gray-200 rounded-lg p-4 shadow-sm hover:bg-red-50 hover:border-red-200 transition flex items-center justify-between group no-underline">
                <div class="flex flex-col gap-2 w-full">
                    <div class="flex items-center gap-3">
                        <div class="bg-gray-100 p-2 rounded-full text-red-600 group-hover:bg-white transition shrink-0">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
                            </svg>
                        </div>
                        <span class="font-semibold text-gray-700 group-hover:text-red-700">${loc.name}</span>
                    </div>
                    
                    ${loc.desc || loc.health ? `
                    <div class="mr-12 mt-1 text-sm bg-gray-50 p-2 rounded-md border border-gray-100">
                        ${loc.desc ? `
                        <div class="flex items-start gap-2 mb-1">
                            <span class="font-bold text-gray-500 text-xs shrink-0 w-20">الوصف:</span>
                            <span class="text-gray-600 text-xs">${loc.desc}</span>
                        </div>` : ''}
                        
                        ${loc.health ? `
                        <div class="flex items-start gap-2">
                            <span class="font-bold text-gray-500 text-xs shrink-0 w-20">أقرب منشأة:</span>
                            <span class="text-red-600 font-medium text-xs">${loc.health}</span>
                        </div>` : ''}
                    </div>
                    ` : ''}
                </div>
                <div class="self-start mt-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-400 group-hover:text-red-500 transform rotate-180" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                    </svg>
                </div>
            </a>
        `).join('');

        elements.listContainer.innerHTML = html;
        window.scrollTo(0,0);
    }
    </script>
</body>
</html>